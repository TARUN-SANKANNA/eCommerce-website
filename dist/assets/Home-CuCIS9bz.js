import{s as N,j as s}from"./index-J4kvQJuh.js";import{r as t,u as B}from"./router-DVV-WQ-W.js";import"./react-qkC6yhPU.js";import"./pdf-KjY7QabL.js";import"./supabase-BUiByx9r.js";function H(){const[n,j]=t.useState([]),[r,m]=t.useState(""),[o,g]=t.useState("all"),[i,f]=t.useState(""),[c,d]=t.useState("all"),[h,u]=t.useState("all"),[y,v]=t.useState([]),[S,C]=t.useState([]),[b,p]=t.useState(!1),x=B();t.useEffect(()=>{w()},[]);async function w(){const{data:e}=await N.from("products").select("*");j(e),v([...new Set(e.map(a=>a.brand).filter(Boolean))]),C([...new Set(e.map(a=>a.type).filter(Boolean))])}let l=n.filter(e=>e.name.toLowerCase().includes(r.toLowerCase())&&(o==="all"||e.category===o)&&(c==="all"||e.brand===c)&&(h==="all"||e.type===h));i==="low"&&l.sort((e,a)=>e.price-a.price),i==="high"&&l.sort((e,a)=>a.price-e.price);function k(e){return n.filter(a=>a.brand===e).length}return s.jsxs("div",{className:"shop-layout",children:[s.jsx("button",{className:"mobile-filter-btn",onClick:()=>p(!0),children:"☰ Filters"}),s.jsxs("div",{className:`filters-panel ${b?"open":""}`,children:[s.jsx("h3",{children:"Filters"}),s.jsx("input",{placeholder:"Search...",value:r,onChange:e=>m(e.target.value)}),s.jsxs("select",{onChange:e=>g(e.target.value),children:[s.jsx("option",{value:"all",children:"All Categories"}),s.jsx("option",{value:"men",children:"Men"}),s.jsx("option",{value:"women",children:"Women"}),s.jsx("option",{value:"kids",children:"Kids"})]}),s.jsx("h4",{children:"Brand"}),y.map(e=>s.jsxs("label",{children:[s.jsx("input",{type:"radio",name:"brand",onChange:()=>d(e)}),e," (",k(e),")"]},e)),s.jsxs("label",{children:[s.jsx("input",{type:"radio",name:"brand",onChange:()=>d("all")})," All"]}),s.jsx("h4",{children:"Type"}),S.map(e=>s.jsxs("label",{children:[s.jsx("input",{type:"radio",name:"type",onChange:()=>u(e)}),e]},e)),s.jsxs("label",{children:[s.jsx("input",{type:"radio",name:"type",onChange:()=>u("all")})," All"]}),s.jsx("h4",{children:"Sort By"}),s.jsxs("select",{onChange:e=>f(e.target.value),children:[s.jsx("option",{value:"",children:"None"}),s.jsx("option",{value:"low",children:"Price: Low → High"}),s.jsx("option",{value:"high",children:"Price: High → Low"})]}),s.jsx("button",{onClick:()=>p(!1),children:"Apply"})]}),s.jsx("div",{className:"grid",children:l.map(e=>s.jsxs("div",{className:"card",children:[s.jsx("img",{src:e.image,onClick:()=>x(`/product/${e.id}`)}),s.jsx("h3",{onClick:()=>x(`/product/${e.id}`),children:e.name}),s.jsxs("p",{children:["₹",e.price]}),e.stock<=5&&e.stock>0&&s.jsxs("p",{className:"low",children:["Only ",e.stock," left"]}),e.stock===0&&s.jsx("p",{className:"out",children:"Out of stock"})]},e.id))})]})}export{H as default};
