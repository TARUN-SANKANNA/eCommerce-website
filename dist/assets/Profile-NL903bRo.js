import{s as o,j as e}from"./index-J4kvQJuh.js";import{r as n}from"./router-DVV-WQ-W.js";import u from"./MyOrders-BMJGYDMg.js";import"./react-qkC6yhPU.js";import"./pdf-KjY7QabL.js";import"./supabase-BUiByx9r.js";function N(){const[a,i]=n.useState({name:"",phone:"",house:"",city:"",state:"",pincode:"",role:"user"}),[d,c]=n.useState(!1),[r,l]=n.useState("profile");n.useEffect(()=>{h()},[]);async function h(){const{data:{user:s}}=await o.auth.getUser();if(!s)return;const{data:t}=await o.from("profiles").select("*").eq("id",s.id).single();t&&i(t)}async function p(){const{data:{user:s}}=await o.auth.getUser();await o.from("profiles").upsert({id:s.id,...a}),alert("Profile updated"),c(!1)}return e.jsxs("div",{className:"profile-container",children:[e.jsxs("div",{className:"profile-sidebar",children:[e.jsx("p",{className:r==="profile"?"active":"",onClick:()=>l("profile"),children:"ðŸ‘¤ Profile"}),e.jsx("p",{className:r==="orders"?"active":"",onClick:()=>l("orders"),children:"ðŸ“¦ My Orders"}),e.jsx("p",{className:r==="address"?"active":"",onClick:()=>l("address"),children:"ðŸ  Address"}),a.role==="shipper"&&e.jsx("p",{className:r==="shipper"?"active":"",onClick:()=>l("shipper"),children:"ðŸšš Shipper Dashboard"})]}),e.jsxs("div",{className:"profile-main",children:[r==="profile"&&e.jsxs(e.Fragment,{children:[e.jsx("h2",{children:"Basic Details"}),e.jsxs("div",{className:"profile-row",children:[e.jsx("label",{children:"Name"}),e.jsx("input",{disabled:!d,value:a.name||"",onChange:s=>i({...a,name:s.target.value})})]}),e.jsxs("div",{className:"profile-row",children:[e.jsx("label",{children:"Phone"}),e.jsx("input",{disabled:!d,value:a.phone||"",onChange:s=>i({...a,phone:s.target.value})})]}),e.jsxs("div",{className:"profile-row",children:[e.jsx("label",{children:"Role"}),e.jsx("input",{disabled:!0,value:a.role})]}),d?e.jsx("button",{className:"save-btn",onClick:p,children:"Save"}):e.jsx("button",{className:"edit-btn",onClick:()=>c(!0),children:"Edit"})]}),r==="address"&&e.jsxs(e.Fragment,{children:[e.jsx("h2",{children:"Shipping Address"}),["house","city","state","pincode"].map(s=>e.jsx("input",{value:a[s]||"",onChange:t=>i({...a,[s]:t.target.value}),placeholder:s},s)),e.jsx("button",{className:"save-btn",onClick:p,children:"Save"})]}),r==="orders"&&e.jsx(u,{}),r==="shipper"&&a.role==="shipper"&&e.jsx(ShipperDashboard,{})]})]})}export{N as default};
