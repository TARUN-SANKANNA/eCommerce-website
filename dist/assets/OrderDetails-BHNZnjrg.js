import{s as p,j as s}from"./index-J4kvQJuh.js";import{c as h,r as a}from"./router-DVV-WQ-W.js";import{E as x}from"./pdf-KjY7QabL.js";import"./react-qkC6yhPU.js";import"./supabase-BUiByx9r.js";function g(){const{id:d}=h(),[e,c]=a.useState(null);a.useEffect(()=>{o()},[]);async function o(){const{data:i,error:t}=await p.from("orders").select("*").eq("id",d).single();t||c(i)}if(!e)return s.jsx("p",{children:"Loading..."});function r(i,t){return s.jsxs("div",{className:`track-step ${t?"done":""}`,children:[s.jsx("span",{children:i}),t&&s.jsx("span",{className:"check",children:"✔"})]})}function l(){const i=new x;i.text("Stay-Aura Invoice",20,20),i.text("Order ID: "+e.id,20,35),i.text("Total: ₹"+e.total,20,45),i.text("Customer:",20,60),i.text(e.shipping.name,20,70),i.text(e.shipping.phone,20,80);let t=100;i.text("Items:",20,t),t+=10,e.items.forEach(n=>{i.text(`${n.name} × ${n.qty||1} — ₹${n.price}`,20,t),t+=10}),i.save(`invoice_${e.id}.pdf`)}return s.jsxs("div",{className:"order-details",children:[s.jsxs("h2",{children:["Order #",e.id]}),s.jsx("p",{className:`status status-${e.status}`,children:e.status.toUpperCase()}),s.jsx("h3",{children:"Tracking"}),s.jsxs("div",{className:"tracking-box",children:[r("Order Placed",!0),r("Shipped",e.shipped_at),r("Delivered",e.delivered_at)]}),s.jsx("h3",{children:"Shipping Address"}),s.jsxs("div",{className:"address-box",children:[s.jsx("p",{children:e.shipping.name}),s.jsx("p",{children:e.shipping.phone}),s.jsxs("p",{children:[e.shipping.house,", ",e.shipping.city,",",s.jsx("br",{}),e.shipping.state," - ",e.shipping.pincode]})]}),s.jsx("h3",{children:"Products"}),s.jsx("div",{className:"items-box",children:e.items.map((i,t)=>s.jsxs("div",{className:"item-row",children:[s.jsx("span",{children:i.name}),s.jsxs("span",{children:[i.qty||1," × ₹",i.price]})]},t))}),s.jsxs("h2",{children:["Total: ₹",e.total]}),s.jsx("button",{className:"invoice-btn",onClick:l,children:"Download Invoice"})]})}export{g as default};
