import{s as a,j as r}from"./index-J4kvQJuh.js";import{r as d}from"./router-DVV-WQ-W.js";import{E as f}from"./pdf-KjY7QabL.js";import"./react-qkC6yhPU.js";import"./supabase-BUiByx9r.js";function y(){const[o,c]=d.useState([]);d.useEffect(()=>{i()},[]);async function i(){const{data:{user:t}}=await a.auth.getUser(),{data:e}=await a.from("orders").select("*").eq("user_id",t.id).order("created_at",{ascending:!1});c(e)}async function l(t){await a.from("orders").update({status:"cancelled"}).eq("id",t),i()}function u(t){const e=new f;e.text("Stay-Aura Invoice",20,20),e.text("Order ID: "+t.id,20,30),e.text("Total: ₹"+t.total,20,40);let n=60;t.items.forEach(s=>{e.text(`${s.name}  ₹${s.price} x ${s.qty||1}`,20,n),n+=10}),e.save("invoice_"+t.id+".pdf")}return r.jsxs("div",{style:{padding:20},children:[r.jsx("h2",{children:"My Orders"}),o.map(t=>r.jsxs("div",{style:{border:"1px solid #ccc",padding:10,marginBottom:10},children:[r.jsxs("p",{children:["₹",t.total," — ",t.status]}),r.jsx("button",{onClick:()=>window.location=`/order/${t.id}`,children:"View Details"}),r.jsx("button",{onClick:()=>u(t),children:"Download Invoice"}),t.status==="pending"&&r.jsx("button",{onClick:()=>l(t.id),style:{marginLeft:10,background:"red",color:"white"},children:"Cancel Order"})]},t.id))]})}export{y as default};
