import{s as t,j as e}from"./index-J4kvQJuh.js";import{r}from"./router-DVV-WQ-W.js";import"./react-qkC6yhPU.js";import"./pdf-KjY7QabL.js";import"./supabase-BUiByx9r.js";function j(){const[d,n]=r.useState([]);r.useEffect(()=>{a()},[]);async function a(){const{data:s}=await t.from("orders").select("*").not("status","in","(delivered,cancelled)").order("created_at",{ascending:!1});n(s||[])}async function p(s){await t.from("orders").update({status:"shipped",shipped_at:new Date}).eq("id",s),a()}async function c(s){await t.from("orders").update({status:"delivered",delivered_at:new Date}).eq("id",s),a()}return e.jsxs("div",{className:"admin-orders",children:[e.jsx("h2",{children:"ğŸ“¦ Orders Management"}),d.map(s=>e.jsxs("div",{className:"order-card",children:[e.jsxs("h4",{children:["Order #",s.id]}),e.jsxs("p",{children:["Status:",e.jsx("span",{className:`status-badge status-${s.status}`,children:s.status})]}),e.jsxs("p",{children:["Total: â‚¹",s.total]}),e.jsxs("p",{children:[s.shipping?.name,e.jsx("br",{}),s.shipping?.phone,e.jsx("br",{}),s.shipping?.house,", ",s.shipping?.city,", ",s.shipping?.state," - ",s.shipping?.pincode]}),s.items.map((i,l)=>e.jsxs("p",{children:[i.name," Ã— ",i.qty||1]},l)),s.status==="pending"&&e.jsx("button",{className:"ship-btn",onClick:()=>p(s.id),children:"Mark as Shipped"}),s.status==="shipped"&&e.jsx("button",{className:"deliver-btn",onClick:()=>c(s.id),children:"Mark as Delivered"})]},s.id))]})}export{j as default};
